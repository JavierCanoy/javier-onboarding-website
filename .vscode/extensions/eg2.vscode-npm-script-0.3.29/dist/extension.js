(()=>{"use strict";var n={87:(n,e,t)=>{var i=t(81),r=t(17),o=t(837);e.runInTerminal=function(n,e,t){return s(n,e||[],t).then((function(n){var e=n;return e.kill2=function(){return c(n)},e}))};var s=/^win/.test(process.platform)?function(n,e,t){return e=["/c","start","/wait","cmd.exe","/c",'"'+n+" "+e.join(" ")+' & pause"'],(t=t||{}).windowsVerbatimArguments=!0,a("cmd.exe",e,t)}:"darwin"===process.platform?function(n,e,t){return a("/usr/bin/osascript",e=[r.join(__dirname,"launcher.scpt"),"cd",o.format("'%s'",t.cwd),";",n].concat(e),t)}:function(n,e,t){var i="";e.length>0&&(i='"'+e.join('" "')+'"');var r="";t.cwd&&(r=o.format('cd "%s"',t.cwd));var s=o.format('%s; "%s" %s ; echo; read -p "%s" -n1;',r,n,i,"Press any key to continue...");return a("/usr/bin/gnome-terminal",e=["-x","bash","-c",o.format("''%s''",s)],t)},c=/^win/.test(process.platform)?function(n){if(n)return new Promise((function(e,t){n.once("exit",(function(n,t){e(n)})),i.exec("taskkill /F /T /PID "+n.pid,(function(n,e,i){n&&t(n)}))}))}:function(n){if(n)return new Promise((function(e,t){n.once("exit",(function(n,t){e(n)})),n.once("error",(function(n){t(n)})),n.kill("SIGTERM")}))};function a(n,e,t){return new Promise((function(r,o){var s=i.spawn(n,e,t);s.on("error",o),setTimeout((function(n){return r(s)}),0)}))}},28:(n,e,t)=>{var i=t(81),r=i.spawn,o=i.exec;function s(n,e,t){var i={};try{Object.keys(n).forEach((function(t){n[t].forEach((function(n){i[n]||(c(n,e),i[n]=1)})),i[t]||(c(t,e),i[t]=1)}))}catch(n){if(t)return t(n);throw n}if(t)return t()}function c(n,e){try{process.kill(parseInt(n,10),e)}catch(n){if("ESRCH"!==n.code)throw n}}function a(n,e,t,i,r){var o=i(n),s="";o.stdout.on("data",(function(n){n=n.toString("ascii"),s+=n})),o.on("close",(function(o){delete t[n],0==o?s.match(/\d+/g).forEach((function(o){o=parseInt(o,10),e[n].push(o),e[o]=[],t[o]=1,a(o,e,t,i,r)})):0==Object.keys(t).length&&r()}))}n.exports=function(n,e,t){if("function"==typeof e&&void 0===t&&(t=e,e=void 0),n=parseInt(n),Number.isNaN(n)){if(t)return t(new Error("pid must be a number"));throw new Error("pid must be a number")}var i={},c={};switch(i[n]=[],c[n]=1,process.platform){case"win32":o("taskkill /pid "+n+" /T /F",t);break;case"darwin":a(n,i,c,(function(n){return r("pgrep",["-P",n])}),(function(){s(i,e,t)}));break;default:a(n,i,c,(function(n){return r("ps",["-o","pid","--no-headers","--ppid",n])}),(function(){s(i,e,t)}))}}},519:function(n,e,t){var i=this&&this.__awaiter||function(n,e,t,i){return new(t||(t=Promise))((function(r,o){function s(n){try{a(i.next(n))}catch(n){o(n)}}function c(n){try{a(i.throw(n))}catch(n){o(n)}}function a(n){var e;n.done?r(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(s,c)}a((i=i.apply(n,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=void 0;const r=t(81),o=t(17),s=t(147),c=t(496),a=t(87),u=t(28);class p{constructor(n,e,t){this.label=n,this.description=e,this.pid=t}}const d=new Map;let m,f=null,l=null;function h(n,e,t=!1){c.workspace.getConfiguration("npm").runSilent&&n.push("--silent"),c.workspace.saveAll().then((()=>{M()&&!t?"function"==typeof c.window.createTerminal?function(n,e){const t=Array.from(n);if(f||(f=c.window.createTerminal("npm")),f.show(),e){const n=e.replace(/\\/g,"\\\\");f.sendText(["cd",`"${n}"`].join(" "))}t.splice(0,0,O()),f.sendText(t.join(" "))}(n,e):function(n,e){(0,a.runInTerminal)(O(),n,{cwd:e,env:process.env})}(n,e):(m.clear(),function(n,e){const t=O()+" "+n.join(" "),i=r.exec(t,{cwd:e,env:process.env});d.set(i.pid,{process:i,cmd:t}),i.stderr.on("data",(n=>{m.append(n)})),i.stdout.on("data",(n=>{m.append(n)})),i.on("exit",((n,e)=>{d.delete(i.pid),"SIGTERM"===e?(m.appendLine("Successfully killed process"),m.appendLine("-----------------------"),m.appendLine("")):(m.appendLine("-----------------------"),m.appendLine(""))})),j()}(n,e))}))}function w(n,e=!1,t=!1,i){const r=function(n,e){e||(e=F());const t=[];return e.forEach((e=>function(n,e,t){const i=e,r=c.Uri.file(i),a=c.workspace.getWorkspaceFolder(r);let u,p;a&&(u=a.uri,p=i.substring(u.fsPath.length+1));const d=n[0],m=n[1];if("run-script"===d)try{const n=o.join(e,"package.json"),r=s.readFileSync(n).toString(),c=JSON.parse(r);if(c.scripts){const n=c.scripts;Object.keys(n).forEach((e=>{m&&e!==m||t.push({absolutePath:i,relativePath:p,name:`${e}`,cmd:`${d} ${n[e]}`})}))}}catch(n){}else t.push({absolutePath:i,relativePath:p,name:`${d}`,cmd:`npm ${d}`})}(n,e,t))),t}(n,i);0!==r.length?function(n,e,t=!1,i=!1){const r=[],o="run-script"===e[0];t&&n.length>1&&r.push(function(n,e){return{label:"All",description:"Run all "+(e?"scripts":"commands")+" listed below",scriptName:"Dummy",cwd:void 0,execute(){for(const e of n)e.cwd&&e.execute()}}}(r,o));for(const t of n){let n=t.name;if(t.relativePath&&(n=`${t.relativePath} - ${n}`),c.workspace.workspaceFolders&&c.workspace.workspaceFolders.length>1){const e=c.workspace.getWorkspaceFolder(c.Uri.file(t.absolutePath));e&&(n=`${e.name}: ${n}`)}r.push({label:n,description:t.cmd,scriptName:t.name,cwd:t.absolutePath,execute(){let n=this.scriptName;/\s/g.test(n)&&(n=`"${n}"`);const t=Array.from(e);o&&(l=this,t.push(n)),h(t,this.cwd,i)}})}1!==r.length?0!==r.length?c.window.showQuickPick(r).then((n=>{n&&n.execute()})):o?c.window.showErrorMessage(`Failed to find script with "${e[1]}" command`):c.window.showErrorMessage(`Failed to find handler for "${e[0]}" command`):r[0].execute()}(r,n,e,t):c.window.showErrorMessage("No scripts found.",{modal:!0})}function g(n,e){const[t,...i]=e;h([n,...i],t)}function k(n){let e=[];n&&n.fsPath?e.push(o.dirname(n.fsPath)):e=F(),w(["install"],!0,!1,e)}function v(...n){g("install",n)}function b(...n){g("uninstall",n)}function x(){w(["test"],!0)}function C(){w(["start"],!0)}function y(){w(["run","build"],!0)}function P(){w(["audit"],!0)}function T(){w(["outdated"],!0)}function E(){w(["init"],!0)}function $(){w(["run-script"],!1)}function I(){l?l.execute():$()}function j(){m.show(c.ViewColumn.Three)}function S(){if(M())c.window.showInformationMessage('Killing is only supported when the setting "runInTerminal" is "false"');else{const n=[];d.forEach((e=>{n.push(new p(e.cmd,`kill the process ${e.process.pid}`,e.process.pid))})),c.window.showQuickPick(n).then((n=>{n&&(m.appendLine(""),m.appendLine(`Killing process ${n.label} (pid: ${n.pid})`),m.appendLine(""),(0,u.kill)(n.pid,"SIGTERM"))}))}}function M(){return c.workspace.getConfiguration("npm").runInTerminal}function F(){const n=[],e=c.workspace.workspaceFolders;if(!e)return n;for(let t=0;t<e.length;t++)if("file"===e[t].uri.scheme){const i=L(e[t].uri);n.push(...i)}return n}function L(n){const e=[];if(!1!==c.workspace.getConfiguration("npm",n).useRootDirectory&&e.push(n.fsPath),c.workspace.getConfiguration("npm",n).includeDirectories.length>0)for(const t of c.workspace.getConfiguration("npm",n).includeDirectories)e.push(o.join(n.fsPath,t));return e}function O(){return c.workspace.getConfiguration("npm").bin||"npm"}e.activate=function(n){!function(n){n.subscriptions.push(c.commands.registerCommand("npm-script.install",k),c.commands.registerCommand("npm-script.init",E),c.commands.registerCommand("npm-script.test",x),c.commands.registerCommand("npm-script.start",C),c.commands.registerCommand("npm-script.run",$),c.commands.registerCommand("npm-script.showOutput",j),c.commands.registerCommand("npm-script.rerun-last-script",I),c.commands.registerCommand("npm-script.build",y),c.commands.registerCommand("npm-script.audit",P),c.commands.registerCommand("npm-script.outdated",T),c.commands.registerCommand("npm-script.installInOutputWindow",v),c.commands.registerCommand("npm-script.uninstallInOutputWindow",b),c.commands.registerCommand("npm-script.terminate-script",S),c.commands.registerCommand("npm-script.showKeybindingsChangedWarning",(function(){return i(this,void 0,void 0,(function*(){const n=c.workspace.getConfiguration();if(n.get("npm.keybindingsChangedWarningShown",!1))return;const e="Learn More";(yield c.window.showInformationMessage("The key bindings of the 'npm-scripts' extension have changed!",{modal:!0},e))===e&&c.env.openExternal(c.Uri.parse("https://github.com/microsoft/vscode-npm-scripts#keyboard-shortcuts")),yield n.update("npm.keybindingsChangedWarningShown",!0,c.ConfigurationTarget.Global)}))})))}(n),m=c.window.createOutputChannel("npm"),n.subscriptions.push(m),c.window.onDidCloseTerminal((n=>{f===n&&(f=null)}))},e.deactivate=function(){f&&f.dispose()}},496:n=>{n.exports=require("vscode")},81:n=>{n.exports=require("child_process")},147:n=>{n.exports=require("fs")},17:n=>{n.exports=require("path")},837:n=>{n.exports=require("util")}},e={},t=function t(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return n[i].call(o.exports,o,o.exports,t),o.exports}(519);module.exports=t})();
//# sourceMappingURL=extension.js.map